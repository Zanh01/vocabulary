<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªçc t·ª´ v·ª±ng v√† m·∫´u c√¢u h√†ng ng√†y c√πng b√©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            padding: 20px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .content {
            padding: 30px;
        }

        /* Trang ch·ªß - Ch·ªçn ch·ªß ƒë·ªÅ */
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .topic-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .topic-card:hover {
            transform: translateY(-5px);
        }

        .topic-card .emoji {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .topic-card h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .topic-card .progress {
            font-size: 0.9em;
            opacity: 0.8;
        }

        /* Navigation */
        .nav {
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav button {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav button:hover {
            background: #ff5252;
        }

        /* Danh s√°ch t·ª´ v·ª±ng */
        .vocab-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .vocab-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .vocab-item:hover {
            transform: translateY(-3px);
        }

        .vocab-image {
            width: 80px;
            height: 80px;
            background: #e9ecef;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
        }

        .vocab-words {
            margin-bottom: 15px;
        }

        .vocab-english {
            font-size: 1.4em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .vocab-vietnamese {
            font-size: 1.1em;
            color: #7f8c8d;
        }

        .audio-btn {
            background: #4ecdc4;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 1.2em;
            transition: background 0.3s ease;
        }

        .audio-btn:hover {
            background: #26d0ce;
        }

        /* Flashcard */
        .flashcard-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
            margin-bottom: 30px;
        }

        .flashcard {
            width: 350px;
            height: 300px;
            position: relative;
            cursor: pointer;
            perspective: 1000px;
        }

        .flashcard-inner {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .flashcard-back {
            transform: rotateY(180deg);
        }

        .flashcard-image {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .flashcard-controls {
            text-align: center;
            margin-bottom: 20px;
        }

        .flip-btn {
            background: #f39c12;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            margin: 0 10px;
            transition: background 0.3s ease;
        }

        .flip-btn:hover {
            background: #e67e22;
        }

        /* Quiz */
        .quiz-container {
            text-align: center;
        }

        .quiz-question {
            font-size: 1.5em;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .quiz-option {
            background: white;
            border: 3px solid #ecf0f1;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .quiz-option:hover {
            border-color: #3498db;
        }

        .quiz-option.correct {
            border-color: #27ae60;
            background: #d5f4e6;
        }

        .quiz-option.incorrect {
            border-color: #e74c3c;
            background: #fdeaea;
        }

        .quiz-image {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .feedback {
            font-size: 1.3em;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .feedback.correct {
            background: #d5f4e6;
            color: #27ae60;
        }

        .feedback.incorrect {
            background: #fdeaea;
            color: #e74c3c;
        }

        /* Trang c√¢u giao ti·∫øp */
        .conversations-container {
            margin-top: 20px;
        }

        .conversations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .conversation-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .conversation-card:hover {
            transform: translateY(-5px);
        }

        .conversation-header {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .conversation-emoji {
            font-size: 2em;
            min-width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #e9ecef;
            border-radius: 50%;
        }

        .conversation-text {
            flex: 1;
        }

        .conversation-english {
            font-weight: bold;
            font-size: 1.2em;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .conversation-vietnamese {
            color: #7f8c8d;
        }

        .conversation-audio {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .audio-btn-conversation {
            background: #4ecdc4;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .audio-btn-conversation:hover {
            background: #26d0ce;
        }

        .hidden {
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .quiz-options {
                grid-template-columns: 1fr;
            }
            
            .flashcard {
                width: 300px;
                height: 250px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .conversations-grid {
                grid-template-columns: 1fr;
            }
            
            .nav button {
                padding: 10px 15px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåü H·ªçc t·ª´ v·ª±ng v√† m·∫´u c√¢u h√†ng ng√†y c√πng b√© üåü</h1>
            <p>H·ªçc ti·∫øng Anh vui v·∫ª qua h√¨nh ·∫£nh v√† √¢m thanh!</p>
        </div>

        <div class="content">
            <!-- Navigation -->
            <div class="nav hidden" id="navigation">
                <button onclick="showTopics()">üè† Trang ch·ªß</button>
                <button onclick="showVocabList()">üìö Danh s√°ch t·ª´</button>
                <button onclick="showFlashcard()">üé¥ Flashcard</button>
                <button onclick="showQuiz()">üéÆ Quiz</button>
                <button onclick="showConversations()">üí¨ C√¢u giao ti·∫øp</button>
            </div>

            <!-- Trang ch·ªß - Ch·ªçn ch·ªß ƒë·ªÅ -->
            <div id="topics-page">
                <h2 style="text-align: center; margin-bottom: 30px; color: #2c3e50;">Ch·ªçn ch·ªß ƒë·ªÅ ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc!</h2>
                <div class="topics-grid" id="topics-grid"></div>
            </div>

            <!-- Danh s√°ch t·ª´ v·ª±ng -->
            <div id="vocab-page" class="hidden">
                <h2 id="vocab-title" style="margin-bottom: 20px; color: #2c3e50;"></h2>
                <div class="vocab-list" id="vocab-list"></div>
            </div>

            <!-- Flashcard -->
            <div id="flashcard-page" class="hidden">
                <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">Flashcard</h2>
                <div class="flashcard-container">
                    <div class="flashcard" id="flashcard" onclick="flipCard()">
                        <div class="flashcard-inner">
                            <div class="flashcard-front">
                                <div class="flashcard-image" id="flashcard-image">üê±</div>
                                <p style="color: #7f8c8d;">Click ƒë·ªÉ l·∫≠t th·∫ª!</p>
                            </div>
                            <div class="flashcard-back">
                                <div style="text-align: center;">
                                    <div style="font-size: 1.8em; font-weight: bold; margin-bottom: 10px;" id="flashcard-english">Cat</div>
                                    <div style="font-size: 1.3em; color: #7f8c8d; margin-bottom: 20px;" id="flashcard-vietnamese">Con m√®o</div>
                                    <button class="audio-btn" onclick="playAudio(event)" id="flashcard-audio">‚ñ∂</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flashcard-controls">
                    <button class="flip-btn" onclick="previousCard()">‚¨Ö Tr∆∞·ªõc</button>
                    <button class="flip-btn" onclick="flipCard()">üîÑ L·∫≠t th·∫ª</button>
                    <button class="flip-btn" onclick="nextCard()">Sau ‚û°</button>
                </div>
            </div>

            <!-- Quiz -->
            <div id="quiz-page" class="hidden">
                <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">Quiz vui nh·ªôn! üéÆ</h2>
                <div class="quiz-container">
                    <div class="quiz-question" id="quiz-question">H√¨nh n√†o l√† "Cat"?</div>
                    <div class="quiz-options" id="quiz-options"></div>
                    <div class="feedback hidden" id="quiz-feedback"></div>
                    <button class="flip-btn hidden" id="next-question" onclick="nextQuestion()">C√¢u ti·∫øp theo ‚û°</button>
                </div>
            </div>
            
            <!-- Trang c√¢u giao ti·∫øp h√†ng ng√†y -->
            <div id="conversations-page" class="hidden">
                <h2 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">100 c√¢u giao ti·∫øp h√†ng ng√†y üí¨</h2>
                <div class="conversations-container">
                    <div class="conversations-grid" id="conversations-grid"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // D·ªØ li·ªáu t·ª´ v·ª±ng
        const vocabularyData = {
            "animals": {
                name: "üêæ ƒê·ªông v·∫≠t",
                emoji: "üêæ",
                words: [
                    { english: "Cat", vietnamese: "Con m√®o", emoji: "üê±" },
                    { english: "Dog", vietnamese: "Con ch√≥", emoji: "üê∂" },
                    { english: "Bird", vietnamese: "Con chim", emoji: "üê¶" },
                    { english: "Fish", vietnamese: "Con c√°", emoji: "üêü" },
                    { english: "Rabbit", vietnamese: "Con th·ªè", emoji: "üê∞" },
                    { english: "Elephant", vietnamese: "Con voi", emoji: "üêò" },
                    { english: "Lion", vietnamese: "S∆∞ t·ª≠", emoji: "ü¶Å" },
                    { english: "Tiger", vietnamese: "Con h·ªï", emoji: "üêÖ" },
                    { english: "Bear", vietnamese: "Con g·∫•u", emoji: "üêª" },
                    { english: "Monkey", vietnamese: "Con kh·ªâ", emoji: "üêµ" }
                ]
            },
            "fruits": {
                name: "üçé Tr√°i c√¢y",
                emoji: "üçé",
                words: [
                    { english: "Apple", vietnamese: "T√°o", emoji: "üçé" },
                    { english: "Banana", vietnamese: "Chu·ªëi", emoji: "üçå" },
                    { english: "Orange", vietnamese: "Cam", emoji: "üçä" },
                    { english: "Grape", vietnamese: "Nho", emoji: "üçá" },
                    { english: "Strawberry", vietnamese: "D√¢u t√¢y", emoji: "üçì" },
                    { english: "Watermelon", vietnamese: "D∆∞a h·∫•u", emoji: "üçâ" },
                    { english: "Pineapple", vietnamese: "D·ª©a", emoji: "üçç" },
                    { english: "Mango", vietnamese: "Xo√†i", emoji: "ü•≠" },
                    { english: "Peach", vietnamese: "ƒê√†o", emoji: "üçë" },
                    { english: "Cherry", vietnamese: "Cherry", emoji: "üçí" }
                ]
            },
            "objects": {
                name: "üéí ƒê·ªì d√πng",
                emoji: "üéí",
                words: [
                    { english: "Book", vietnamese: "S√°ch", emoji: "üìö" },
                    { english: "Pen", vietnamese: "B√∫t", emoji: "‚úèÔ∏è" },
                    { english: "Ball", vietnamese: "B√≥ng", emoji: "‚öΩ" },
                    { english: "Car", vietnamese: "√î t√¥", emoji: "üöó" },
                    { english: "House", vietnamese: "Nh√†", emoji: "üè†" },
                    { english: "Clock", vietnamese: "ƒê·ªìng h·ªì", emoji: "üïê" },
                    { english: "Phone", vietnamese: "ƒêi·ªán tho·∫°i", emoji: "üì±" },
                    { english: "Computer", vietnamese: "M√°y t√≠nh", emoji: "üíª" },
                    { english: "Chair", vietnamese: "Gh·∫ø", emoji: "ü™ë" },
                    { english: "Table", vietnamese: "B√†n", emoji: "ü™ë" }
                ]
            },
            "colors": {
                name: "üåà M√†u s·∫Øc",
                emoji: "üåà",
                words: [
                    { english: "Red", vietnamese: "M√†u ƒë·ªè", emoji: "üî¥" },
                    { english: "Blue", vietnamese: "M√†u xanh d∆∞∆°ng", emoji: "üîµ" },
                    { english: "Green", vietnamese: "M√†u xanh l√°", emoji: "üü¢" },
                    { english: "Yellow", vietnamese: "M√†u v√†ng", emoji: "üü°" },
                    { english: "Orange", vietnamese: "M√†u cam", emoji: "üü†" },
                    { english: "Purple", vietnamese: "M√†u t√≠m", emoji: "üü£" },
                    { english: "Pink", vietnamese: "M√†u h·ªìng", emoji: "ü©∑" },
                    { english: "Black", vietnamese: "M√†u ƒëen", emoji: "‚ö´" },
                    { english: "White", vietnamese: "M√†u tr·∫Øng", emoji: "‚ö™" },
                    { english: "Brown", vietnamese: "M√†u n√¢u", emoji: "ü§é" }
                ]
            },
            "school": {
                name: "üè´ Tr∆∞·ªùng h·ªçc",
                emoji: "üè´",
                words: [
                    { english: "Teacher", vietnamese: "Gi√°o vi√™n", emoji: "üë©‚Äçüè´" },
                    { english: "Student", vietnamese: "H·ªçc sinh", emoji: "üë®‚Äçüéì" },
                    { english: "Classroom", vietnamese: "L·ªõp h·ªçc", emoji: "üè´" },
                    { english: "Blackboard", vietnamese: "B·∫£ng ƒëen", emoji: "üìã" },
                    { english: "Pencil", vietnamese: "B√∫t ch√¨", emoji: "‚úèÔ∏è" },
                    { english: "Eraser", vietnamese: "C·ª•c t·∫©y", emoji: "üßΩ" },
                    { english: "Ruler", vietnamese: "Th∆∞·ªõc k·∫ª", emoji: "üìè" },
                    { english: "Backpack", vietnamese: "Ba l√¥", emoji: "üéí" },
                    { english: "Notebook", vietnamese: "V·ªü", emoji: "üìì" },
                    { english: "Library", vietnamese: "Th∆∞ vi·ªán", emoji: "üìö" }
                ]
            },
            "family": {
                name: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Gia ƒë√¨nh",
                emoji: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶",
                words: [
                    { english: "Father", vietnamese: "B·ªë", emoji: "üë®" },
                    { english: "Mother", vietnamese: "M·∫π", emoji: "üë©" },
                    { english: "Brother", vietnamese: "Anh/Em trai", emoji: "üë¶" },
                    { english: "Sister", vietnamese: "Ch·ªã/Em g√°i", emoji: "üëß" },
                    { english: "Grandfather", vietnamese: "√îng", emoji: "üë¥" },
                    { english: "Grandmother", vietnamese: "B√†", emoji: "üëµ" },
                    { english: "Uncle", vietnamese: "Ch√∫/B√°c", emoji: "üë®‚Äçü¶≥" },
                    { english: "Aunt", vietnamese: "C√¥/D√¨", emoji: "üë©‚Äçü¶≥" },
                    { english: "Cousin", vietnamese: "Anh/Ch·ªã/Em h·ªç", emoji: "üßë‚Äçü§ù‚Äçüßë" },
                    { english: "Baby", vietnamese: "Em b√©", emoji: "üë∂" }
                ]
            },
            "house": {
                name: "üè† Trong nh√†",
                emoji: "üè†",
                words: [
                    { english: "Kitchen", vietnamese: "B·∫øp", emoji: "üç≥" },
                    { english: "Bedroom", vietnamese: "Ph√≤ng ng·ªß", emoji: "üõèÔ∏è" },
                    { english: "Bathroom", vietnamese: "Ph√≤ng t·∫Øm", emoji: "üõÅ" },
                    { english: "Living room", vietnamese: "Ph√≤ng kh√°ch", emoji: "üõãÔ∏è" },
                    { english: "Window", vietnamese: "C·ª≠a s·ªï", emoji: "ü™ü" },
                    { english: "Door", vietnamese: "C·ª≠a", emoji: "üö™" },
                    { english: "Bed", vietnamese: "Gi∆∞·ªùng", emoji: "üõèÔ∏è" },
                    { english: "Sofa", vietnamese: "Gh·∫ø sofa", emoji: "üõãÔ∏è" },
                    { english: "Television", vietnamese: "Tivi", emoji: "üì∫" },
                    { english: "Lamp", vietnamese: "ƒê√®n", emoji: "üí°" }
                ]
            },
            "weather": {
                name: "üå§Ô∏è Th·ªùi ti·∫øt",
                emoji: "üå§Ô∏è",
                words: [
                    { english: "Sunny", vietnamese: "N·∫Øng", emoji: "‚òÄÔ∏è" },
                    { english: "Rainy", vietnamese: "M∆∞a", emoji: "üåßÔ∏è" },
                    { english: "Cloudy", vietnamese: "Nhi·ªÅu m√¢y", emoji: "‚òÅÔ∏è" },
                    { english: "Windy", vietnamese: "Gi√≥", emoji: "üí®" },
                    { english: "Snowy", vietnamese: "Tuy·∫øt", emoji: "‚ùÑÔ∏è" },
                    { english: "Hot", vietnamese: "N√≥ng", emoji: "üî•" },
                    { english: "Cold", vietnamese: "L·∫°nh", emoji: "üßä" },
                    { english: "Storm", vietnamese: "B√£o", emoji: "‚õàÔ∏è" },
                    { english: "Rainbow", vietnamese: "C·∫ßu v·ªìng", emoji: "üåà" },
                    { english: "Lightning", vietnamese: "S√©t", emoji: "‚ö°" }
                ]
            },
            "clothes": {
                name: "üëï Qu·∫ßn √°o",
                emoji: "üëï",
                words: [
                    { english: "Shirt", vietnamese: "√Åo s∆° mi", emoji: "üëî" },
                    { english: "T-shirt", vietnamese: "√Åo thun", emoji: "üëï" },
                    { english: "Pants", vietnamese: "Qu·∫ßn d√†i", emoji: "üëñ" },
                    { english: "Dress", vietnamese: "V√°y", emoji: "üëó" },
                    { english: "Shoes", vietnamese: "Gi√†y", emoji: "üëû" },
                    { english: "Socks", vietnamese: "T·∫•t", emoji: "üß¶" },
                    { english: "Hat", vietnamese: "M≈©", emoji: "üëí" },
                    { english: "Jacket", vietnamese: "√Åo kho√°c", emoji: "üß•" },
                    { english: "Skirt", vietnamese: "Ch√¢n v√°y", emoji: "üëö" },
                    { english: "Gloves", vietnamese: "GƒÉng tay", emoji: "üß§" }
                ]
            },
            "food": {
                name: "üçï ƒê·ªì ƒÉn",
                emoji: "üçï",
                words: [
                    { english: "Rice", vietnamese: "C∆°m", emoji: "üçö" },
                    { english: "Bread", vietnamese: "B√°nh m√¨", emoji: "üçû" },
                    { english: "Pizza", vietnamese: "Pizza", emoji: "üçï" },
                    { english: "Hamburger", vietnamese: "Hamburger", emoji: "üçî" },
                    { english: "Noodles", vietnamese: "M√¨", emoji: "üçú" },
                    { english: "Egg", vietnamese: "Tr·ª©ng", emoji: "ü•ö" },
                    { english: "Milk", vietnamese: "S·ªØa", emoji: "ü•õ" },
                    { english: "Water", vietnamese: "N∆∞·ªõc", emoji: "üíß" },
                    { english: "Cake", vietnamese: "B√°nh ng·ªçt", emoji: "üç∞" },
                    { english: "Ice cream", vietnamese: "Kem", emoji: "üç¶" }
                ]
            },
            "transport": {
                name: "üöó Ph∆∞∆°ng ti·ªán",
                emoji: "üöó",
                words: [
                    { english: "Bus", vietnamese: "Xe bu√Ωt", emoji: "üöå" },
                    { english: "Train", vietnamese: "T√†u h·ªèa", emoji: "üöÇ" },
                    { english: "Airplane", vietnamese: "M√°y bay", emoji: "‚úàÔ∏è" },
                    { english: "Bicycle", vietnamese: "Xe ƒë·∫°p", emoji: "üö¥" },
                    { english: "Motorcycle", vietnamese: "Xe m√°y", emoji: "üèçÔ∏è" },
                    { english: "Ship", vietnamese: "T√†u th·ªßy", emoji: "üö¢" },
                    { english: "Truck", vietnamese: "Xe t·∫£i", emoji: "üöõ" },
                    { english: "Taxi", vietnamese: "Taxi", emoji: "üöï" },
                    { english: "Helicopter", vietnamese: "Tr·ª±c thƒÉng", emoji: "üöÅ" },
                    { english: "Rocket", vietnamese: "T√™n l·ª≠a", emoji: "üöÄ" }
                ]
            },
            "sports": {
                name: "‚öΩ Th·ªÉ thao",
                emoji: "‚öΩ",
                words: [
                    { english: "Football", vietnamese: "B√≥ng ƒë√°", emoji: "‚öΩ" },
                    { english: "Basketball", vietnamese: "B√≥ng r·ªï", emoji: "üèÄ" },
                    { english: "Tennis", vietnamese: "Tennis", emoji: "üéæ" },
                    { english: "Swimming", vietnamese: "B∆°i l·ªôi", emoji: "üèä" },
                    { english: "Running", vietnamese: "Ch·∫°y b·ªô", emoji: "üèÉ" },
                    { english: "Baseball", vietnamese: "B√≥ng ch√†y", emoji: "‚öæ" },
                    { english: "Volleyball", vietnamese: "B√≥ng chuy·ªÅn", emoji: "üèê" },
                    { english: "Cycling", vietnamese: "ƒêua xe ƒë·∫°p", emoji: "üö¥" },
                    { english: "Boxing", vietnamese: "Quy·ªÅn anh", emoji: "ü•ä" },
                    { english: "Golf", vietnamese: "Golf", emoji: "‚õ≥" }
                ]
            },
            "music": {
                name: "üéµ √Çm nh·∫°c",
                emoji: "üéµ",
                words: [
                    { english: "Piano", vietnamese: "Piano", emoji: "üéπ" },
                    { english: "Guitar", vietnamese: "Guitar", emoji: "üé∏" },
                    { english: "Drum", vietnamese: "Tr·ªëng", emoji: "ü•Å" },
                    { english: "Violin", vietnamese: "Violin", emoji: "üéª" },
                    { english: "Singing", vietnamese: "H√°t", emoji: "üé§" },
                    { english: "Dancing", vietnamese: "Nh·∫£y", emoji: "üíÉ" },
                    { english: "Music", vietnamese: "√Çm nh·∫°c", emoji: "üéµ" },
                    { english: "Song", vietnamese: "B√†i h√°t", emoji: "üé∂" },
                    { english: "Radio", vietnamese: "Radio", emoji: "üìª" },
                    { english: "Speaker", vietnamese: "Loa", emoji: "üîä" }
                ]
            },
            "numbers": {
                name: "üî¢ S·ªë ƒë·∫øm",
                emoji: "üî¢",
                words: [
                    { english: "One", vietnamese: "M·ªôt", emoji: "1Ô∏è‚É£" },
                    { english: "Two", vietnamese: "Hai", emoji: "2Ô∏è‚É£" },
                    { english: "Three", vietnamese: "Ba", emoji: "3Ô∏è‚É£" },
                    { english: "Four", vietnamese: "B·ªën", emoji: "4Ô∏è‚É£" },
                    { english: "Five", vietnamese: "NƒÉm", emoji: "5Ô∏è‚É£" },
                    { english: "Six", vietnamese: "S√°u", emoji: "6Ô∏è‚É£" },
                    { english: "Seven", vietnamese: "B·∫£y", emoji: "7Ô∏è‚É£" },
                    { english: "Eight", vietnamese: "T√°m", emoji: "8Ô∏è‚É£" },
                    { english: "Nine", vietnamese: "Ch√≠n", emoji: "9Ô∏è‚É£" },
                    { english: "Ten", vietnamese: "M∆∞·ªùi", emoji: "üîü" }
                ]
            },
            "time": {
                name: "üìÖ Th·ªùi gian",
                emoji: "üìÖ",
                words: [
                    { english: "Morning", vietnamese: "Bu·ªïi s√°ng", emoji: "üåÖ" },
                    { english: "Afternoon", vietnamese: "Bu·ªïi chi·ªÅu", emoji: "üåá" },
                    { english: "Evening", vietnamese: "Bu·ªïi t·ªëi", emoji: "üåÜ" },
                    { english: "Night", vietnamese: "Ban ƒë√™m", emoji: "üåô" },
                    { english: "Today", vietnamese: "H√¥m nay", emoji: "üìÖ" },
                    { english: "Tomorrow", vietnamese: "Ng√†y mai", emoji: "üìÜ" },
                    { english: "Yesterday", vietnamese: "H√¥m qua", emoji: "üìã" },
                    { english: "Week", vietnamese: "Tu·∫ßn", emoji: "üìñ" },
                    { english: "Month", vietnamese: "Th√°ng", emoji: "üìë" },
                    { english: "Year", vietnamese: "NƒÉm", emoji: "üóìÔ∏è" }
                ]
            },
            "emotions": {
                name: "üòä C·∫£m x√∫c",
                emoji: "üòä",
                words: [
                    { english: "Happy", vietnamese: "Vui v·∫ª", emoji: "üòä" },
                    { english: "Sad", vietnamese: "Bu·ªìn", emoji: "üò¢" },
                    { english: "Angry", vietnamese: "T·ª©c gi·∫≠n", emoji: "üò†" },
                    { english: "Scared", vietnamese: "S·ª£ h√£i", emoji: "üò®" },
                    { english: "Surprised", vietnamese: "Ng·∫°c nhi√™n", emoji: "üò≤" },
                    { english: "Excited", vietnamese: "Ph·∫•n kh√≠ch", emoji: "ü§©" },
                    { english: "Tired", vietnamese: "M·ªát m·ªèi", emoji: "üò¥" },
                    { english: "Hungry", vietnamese: "ƒê√≥i", emoji: "üòã" },
                    { english: "Thirsty", vietnamese: "Kh√°t", emoji: "ü•§" },
                    { english: "Love", vietnamese: "Y√™u", emoji: "‚ù§Ô∏è" }
                ]
            },
            "daily_conversations": {
                name: "üí¨ Giao ti·∫øp h√†ng ng√†y",
                emoji: "üí¨",
                words: [
                    { english: "Hello", vietnamese: "Xin ch√†o", emoji: "üëã" },
                    { english: "Good morning", vietnamese: "Ch√†o bu·ªïi s√°ng", emoji: "üåû" },
                    { english: "Good afternoon", vietnamese: "Ch√†o bu·ªïi chi·ªÅu", emoji: "üåá" },
                    { english: "Good evening", vietnamese: "Ch√†o bu·ªïi t·ªëi", emoji: "üåÉ" },
                    { english: "How are you?", vietnamese: "B·∫°n kh·ªèe kh√¥ng?", emoji: "üôÇ" },
                    { english: "I'm fine, thank you", vietnamese: "T√¥i kh·ªèe, c·∫£m ∆°n", emoji: "üëç" },
                    { english: "What's your name?", vietnamese: "B·∫°n t√™n g√¨?", emoji: "üë§" },
                    { english: "My name is...", vietnamese: "T√¥i t√™n l√†...", emoji: "üí¨" },
                    { english: "Nice to meet you", vietnamese: "R·∫•t vui ƒë∆∞·ª£c g·∫∑p b·∫°n", emoji: "üòä" },
                    { english: "Goodbye", vietnamese: "T·∫°m bi·ªát", emoji: "üëã" },
                    { english: "See you later", vietnamese: "H·∫πn g·∫∑p l·∫°i", emoji: "‚è±Ô∏è" },
                    { english: "Thank you", vietnamese: "C·∫£m ∆°n", emoji: "üôè" },
                    { english: "You're welcome", vietnamese: "Kh√¥ng c√≥ g√¨", emoji: "üòä" },
                    { english: "Please", vietnamese: "L√†m ∆°n", emoji: "üôè" },
                    { english: "Excuse me", vietnamese: "Xin l·ªói (l√†m phi·ªÅn)", emoji: "üôá" },
                    { english: "I'm sorry", vietnamese: "T√¥i xin l·ªói", emoji: "üòî" },
                    { english: "Yes", vietnamese: "V√¢ng", emoji: "‚úÖ" },
                    { english: "No", vietnamese: "Kh√¥ng", emoji: "‚ùå" },
                    { english: "I don't understand", vietnamese: "T√¥i kh√¥ng hi·ªÉu", emoji: "‚ùì" },
                    { english: "Can you help me?", vietnamese: "B·∫°n c√≥ th·ªÉ gi√∫p t√¥i kh√¥ng?", emoji: "üôã" },
                    { english: "How old are you?", vietnamese: "B·∫°n bao nhi√™u tu·ªïi?", emoji: "üéÇ" },
                    { english: "I am 6 years old", vietnamese: "T√¥i 6 tu·ªïi", emoji: "üëß" },
                    { english: "Where are you from?", vietnamese: "B·∫°n ƒë·∫øn t·ª´ ƒë√¢u?", emoji: "üåç" },
                    { english: "I'm from Vietnam", vietnamese: "T√¥i ƒë·∫øn t·ª´ Vi·ªát Nam", emoji: "üáªüá≥" },
                    { english: "What is this?", vietnamese: "ƒê√¢y l√† c√°i g√¨?", emoji: "‚ùì" },
                    { english: "This is a book", vietnamese: "ƒê√¢y l√† quy·ªÉn s√°ch", emoji: "üìö" },
                    { english: "What color is it?", vietnamese: "N√≥ m√†u g√¨?", emoji: "üé®" },
                    { english: "It's red", vietnamese: "N√≥ m√†u ƒë·ªè", emoji: "üî¥" },
                    { english: "How many?", vietnamese: "Bao nhi√™u?", emoji: "üî¢" },
                    { english: "One, two, three", vietnamese: "M·ªôt, hai, ba", emoji: "123" },
                    { english: "I'm hungry", vietnamese: "T√¥i ƒë√≥i", emoji: "üòã" },
                    { english: "I'm thirsty", vietnamese: "T√¥i kh√°t", emoji: "ü•§" },
                    { english: "I'm tired", vietnamese: "T√¥i m·ªát", emoji: "üò¥" },
                    { english: "I'm happy", vietnamese: "T√¥i vui", emoji: "üòä" },
                    { english: "I'm sad", vietnamese: "T√¥i bu·ªìn", emoji: "üò¢" },
                    { english: "Let's play", vietnamese: "C√πng ch∆°i n√†o", emoji: "üéÆ" },
                    { english: "Let's go", vietnamese: "ƒêi th√¥i", emoji: "üö∂" },
                    { english: "Come here", vietnamese: "L·∫°i ƒë√¢y", emoji: "üëâ" },
                    { english: "Sit down", vietnamese: "Ng·ªìi xu·ªëng", emoji: "ü™ë" },
                    { english: "Stand up", vietnamese: "ƒê·ª©ng l√™n", emoji: "üßç" },
                    { english: "Be quiet", vietnamese: "H√£y y√™n l·∫∑ng", emoji: "ü§´" },
                    { english: "Listen", vietnamese: "L·∫Øng nghe", emoji: "üëÇ" },
                    { english: "Look", vietnamese: "Nh√¨n k√¨a", emoji: "üëÄ" },
                    { english: "Good job!", vietnamese: "L√†m t·ªët l·∫Øm!", emoji: "üëè" },
                    { english: "Well done!", vietnamese: "Ho√†n th√†nh t·ªët!", emoji: "üéâ" },
                    { english: "I love you", vietnamese: "T√¥i y√™u b·∫°n", emoji: "‚ù§Ô∏è" },
                    { english: "I miss you", vietnamese: "T√¥i nh·ªõ b·∫°n", emoji: "üíå" },
                    { english: "Can I have...?", vietnamese: "T√¥i c√≥ th·ªÉ l·∫•y...?", emoji: "üôã" },
                    { english: "Can I go to the toilet?", vietnamese: "T√¥i ƒëi v·ªá sinh ƒë∆∞·ª£c kh√¥ng?", emoji: "üöΩ" },
                    { english: "It's time to eat", vietnamese: "ƒê·∫øn gi·ªù ƒÉn r·ªìi", emoji: "üçΩÔ∏è" },
                    { english: "It's time to sleep", vietnamese: "ƒê·∫øn gi·ªù ng·ªß r·ªìi", emoji: "üõèÔ∏è" },
                    { english: "What do you want?", vietnamese: "B·∫°n mu·ªën g√¨?", emoji: "‚ùì" },
                    { english: "I want water", vietnamese: "T√¥i mu·ªën n∆∞·ªõc", emoji: "üíß" },
                    { english: "I want to play", vietnamese: "T√¥i mu·ªën ch∆°i", emoji: "üéÆ" },
                    { english: "I like it", vietnamese: "T√¥i th√≠ch n√≥", emoji: "üëç" },
                    { english: "I don't like it", vietnamese: "T√¥i kh√¥ng th√≠ch n√≥", emoji: "üëé" },
                    { english: "It's beautiful", vietnamese: "N√≥ ƒë·∫πp qu√°", emoji: "‚ú®" },
                    { english: "It's fun", vietnamese: "N√≥ vui qu√°", emoji: "üòÑ" },
                    { english: "It's delicious", vietnamese: "N√≥ ngon qu√°", emoji: "üòã" },
                    { english: "It's too big", vietnamese: "N√≥ qu√° to", emoji: "ü´é" },
                    { english: "It's too small", vietnamese: "N√≥ qu√° nh·ªè", emoji: "üêú" },
                    { english: "Help me", vietnamese: "Gi√∫p t√¥i", emoji: "üÜò" },
                    { english: "Be careful", vietnamese: "H√£y c·∫©n th·∫≠n", emoji: "‚ö†Ô∏è" },
                    { english: "Don't worry", vietnamese: "ƒê·ª´ng lo l·∫Øng", emoji: "üòå" },
                    { english: "Congratulations", vietnamese: "Ch√∫c m·ª´ng", emoji: "üéä" },
                    { english: "Happy birthday", vietnamese: "Ch√∫c m·ª´ng sinh nh·∫≠t", emoji: "üéÇ" },
                    { english: "Merry Christmas", vietnamese: "Gi√°ng sinh vui v·∫ª", emoji: "üéÑ" },
                    { english: "Happy New Year", vietnamese: "Ch√∫c m·ª´ng nƒÉm m·ªõi", emoji: "üéÜ" },
                    { english: "Good luck", vietnamese: "Ch√∫c may m·∫Øn", emoji: "üçÄ" },
                    { english: "Have a nice day", vietnamese: "Ch√∫c m·ªôt ng√†y t·ªët l√†nh", emoji: "üåû" },
                    { english: "How much is it?", vietnamese: "N√≥ gi√° bao nhi√™u?", emoji: "üí∞" },
                    { english: "I want to buy this", vietnamese: "T√¥i mu·ªën mua c√°i n√†y", emoji: "üõí" },
                    { english: "What time is it?", vietnamese: "M·∫•y gi·ªù r·ªìi?", emoji: "üïí" },
                    { english: "It's 3 o'clock", vietnamese: "B√¢y gi·ªù l√† 3 gi·ªù", emoji: "3Ô∏è‚É£" },
                    { english: "Where is the bathroom?", vietnamese: "Nh√† v·ªá sinh ·ªü ƒë√¢u?", emoji: "üöª" },
                    { english: "I'm lost", vietnamese: "T√¥i b·ªã l·∫°c", emoji: "üß≠" },
                    { english: "Call the police", vietnamese: "G·ªçi c·∫£nh s√°t", emoji: "üëÆ" },
                    { english: "I need a doctor", vietnamese: "T√¥i c·∫ßn b√°c sƒ©", emoji: "üë®‚Äç‚öïÔ∏è" },
                    { english: "It hurts", vietnamese: "ƒêau qu√°", emoji: "üò£" },
                    { english: "Are you okay?", vietnamese: "B·∫°n c√≥ ·ªïn kh√¥ng?", emoji: "ü§î" },
                    { english: "I'm okay", vietnamese: "T√¥i ·ªïn", emoji: "üëç" },
                    { english: "Let me see", vietnamese: "ƒê·ªÉ t√¥i xem", emoji: "üëÄ" },
                    { english: "I think so", vietnamese: "T√¥i nghƒ© v·∫≠y", emoji: "ü§î" },
                    { english: "I don't think so", vietnamese: "T√¥i kh√¥ng nghƒ© v·∫≠y", emoji: "üôÖ" },
                    { english: "Maybe", vietnamese: "C√≥ th·ªÉ", emoji: "ü§∑" },
                    { english: "Of course", vietnamese: "Dƒ© nhi√™n", emoji: "üòä" },
                    { english: "That's great", vietnamese: "Tuy·ªát v·ªùi", emoji: "üåü" },
                    { english: "That's too bad", vietnamese: "T·ªá qu√°", emoji: "üòû" },
                    { english: "Never mind", vietnamese: "ƒê·ª´ng b·∫≠n t√¢m", emoji: "üòå" },
                    { english: "You're right", vietnamese: "B·∫°n n√≥i ƒë√∫ng", emoji: "‚úÖ" },
                    { english: "You're wrong", vietnamese: "B·∫°n sai r·ªìi", emoji: "‚ùå" },
                    { english: "I agree", vietnamese: "T√¥i ƒë·ªìng √Ω", emoji: "üëç" },
                    { english: "I disagree", vietnamese: "T√¥i kh√¥ng ƒë·ªìng √Ω", emoji: "üëé" },
                    { english: "I don't know", vietnamese: "T√¥i kh√¥ng bi·∫øt", emoji: "ü§∑" },
                    { english: "Wait a minute", vietnamese: "Ch·ªù m·ªôt ch√∫t", emoji: "‚è≥" },
                    { english: "Hurry up", vietnamese: "Nhanh l√™n", emoji: "üèÉ" },
                    { english: "Slow down", vietnamese: "Ch·∫≠m l·∫°i", emoji: "üê¢" },
                    { english: "Stop", vietnamese: "D·ª´ng l·∫°i", emoji: "‚úã" },
                    { english: "Go ahead", vietnamese: "C·ª© ti·∫øp t·ª•c ƒëi", emoji: "üëâ" },
                    { english: "Good night", vietnamese: "Ch√∫c ng·ªß ngon", emoji: "üåô" },
                    { english: "Sweet dreams", vietnamese: "Nh·ªØng gi·∫•c m∆° ƒë·∫πp", emoji: "üí§" }
                ]
            }
        };

        // Bi·∫øn tr·∫°ng th√°i
        let currentTopic = null;
        let currentFlashcardIndex = 0;
        let currentQuizQuestion = 0;
        let quizQuestions = [];
        let viewedWords = {};

        // Kh·ªüi t·∫°o ·ª©ng d·ª•ng
        function init() {
            loadProgress();
            renderTopics();
        }

        // Hi·ªÉn th·ªã danh s√°ch ch·ªß ƒë·ªÅ
        function renderTopics() {
            const grid = document.getElementById('topics-grid');
            grid.innerHTML = '';
            
            Object.keys(vocabularyData).forEach(topicKey => {
                const topic = vocabularyData[topicKey];
                const viewedCount = viewedWords[topicKey] ? viewedWords[topicKey].size : 0;
                const totalWords = topic.words.length;
                
                const card = document.createElement('div');
                card.className = 'topic-card';
                card.onclick = () => selectTopic(topicKey);
                
                card.innerHTML = `
                    <div class="emoji">${topic.emoji}</div>
                    <h3>${topic.name}</h3>
                    <div class="progress">ƒê√£ h·ªçc: ${viewedCount}/${totalWords} t·ª´</div>
                `;
                
                grid.appendChild(card);
            });
        }

        // Ch·ªçn ch·ªß ƒë·ªÅ
        function selectTopic(topicKey) {
            currentTopic = topicKey;
            if (topicKey === 'daily_conversations') {
                showConversations();
            } else {
                showVocabList();
            }
        }

        // Hi·ªÉn th·ªã c√°c trang
        function showPage(pageId) {
            const pages = ['topics-page', 'vocab-page', 'flashcard-page', 'quiz-page', 'conversations-page'];
            pages.forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(pageId).classList.remove('hidden');
            
            if (pageId !== 'topics-page') {
                document.getElementById('navigation').classList.remove('hidden');
            } else {
                document.getElementById('navigation').classList.add('hidden');
            }
        }

        function showTopics() {
            currentTopic = null;
            showPage('topics-page');
            renderTopics();
        }

        function showVocabList() {
            if (!currentTopic) return;
            showPage('vocab-page');
            renderVocabList();
        }

        function showFlashcard() {
            if (!currentTopic) return;
            showPage('flashcard-page');
            currentFlashcardIndex = 0;
            renderFlashcard();
        }

        function showQuiz() {
            if (!currentTopic) return;
            showPage('quiz-page');
            initQuiz();
        }
        
        function showConversations() {
            showPage('conversations-page');
            renderConversations();
        }

        // Render danh s√°ch t·ª´ v·ª±ng
        function renderVocabList() {
            const topic = vocabularyData[currentTopic];
            document.getElementById('vocab-title').textContent = topic.name;
            
            const list = document.getElementById('vocab-list');
            list.innerHTML = '';
            
            topic.words.forEach((word, index) => {
                const item = document.createElement('div');
                item.className = 'vocab-item';
                item.onclick = () => markAsViewed(currentTopic, index);
                
                item.innerHTML = `
                    <div class="vocab-image">${word.emoji}</div>
                    <div class="vocab-words">
                        <div class="vocab-english">${word.english}</div>
                        <div class="vocab-vietnamese">${word.vietnamese}</div>
                    </div>
                    <button class="audio-btn" onclick="playWordAudio('${word.english}', event)">‚ñ∂</button>
                `;
                
                list.appendChild(item);
            });
        }
        
        // Render c√¢u giao ti·∫øp
        function renderConversations() {
            const grid = document.getElementById('conversations-grid');
            grid.innerHTML = '';
            
            const conversations = vocabularyData['daily_conversations'].words;
            
            conversations.forEach((conversation, index) => {
                const card = document.createElement('div');
                card.className = 'conversation-card';
                
                card.innerHTML = `
                    <div class="conversation-header">
                        <div class="conversation-emoji">${conversation.emoji}</div>
                        <div class="conversation-text">
                            <div class="conversation-english">${conversation.english}</div>
                            <div class="conversation-vietnamese">${conversation.vietnamese}</div>
                        </div>
                    </div>
                    <div class="conversation-audio">
                        <button class="audio-btn-conversation" onclick="playWordAudio('${conversation.english}', event)">
                            <span>‚ñ∂ Ph√°t ti·∫øng Anh</span>
                        </button>

                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // Flashcard
        function renderFlashcard() {
            const topic = vocabularyData[currentTopic];
            const word = topic.words[currentFlashcardIndex];
            
            document.getElementById('flashcard-image').textContent = word.emoji;
            document.getElementById('flashcard-english').textContent = word.english;
            document.getElementById('flashcard-vietnamese').textContent = word.vietnamese;
            
            // Reset tr·∫°ng th√°i l·∫≠t th·∫ª
            document.getElementById('flashcard').classList.remove('flipped');
        }

        function flipCard() {
            const flashcard = document.getElementById('flashcard');
            flashcard.classList.toggle('flipped');
            
            // ƒê√°nh d·∫•u t·ª´ ƒë√£ xem
            markAsViewed(currentTopic, currentFlashcardIndex);
        }

        function nextCard() {
            const topic = vocabularyData[currentTopic];
            currentFlashcardIndex = (currentFlashcardIndex + 1) % topic.words.length;
            renderFlashcard();
        }

        function previousCard() {
            const topic = vocabularyData[currentTopic];
            currentFlashcardIndex = currentFlashcardIndex > 0 ? currentFlashcardIndex - 1 : topic.words.length - 1;
            renderFlashcard();
        }

        // Quiz
        function initQuiz() {
            const topic = vocabularyData[currentTopic];
            quizQuestions = [];
            
            // T·∫°o 5 c√¢u h·ªèi ng·∫´u nhi√™n
            for (let i = 0; i < Math.min(5, topic.words.length); i++) {
                const correctWord = topic.words[Math.floor(Math.random() * topic.words.length)];
                const wrongWords = topic.words.filter(w => w !== correctWord)
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 3);
                
                const options = [correctWord, ...wrongWords].sort(() => Math.random() - 0.5);
                
                quizQuestions.push({
                    question: `H√¨nh n√†o l√† "${correctWord.english}"?`,
                    correctAnswer: correctWord,
                    options: options
                });
            }
            
            currentQuizQuestion = 0;
            renderQuizQuestion();
        }

        function renderQuizQuestion() {
            const question = quizQuestions[currentQuizQuestion];
            document.getElementById('quiz-question').textContent = question.question;
            
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quiz-option';
                optionDiv.onclick = () => selectQuizAnswer(option, question.correctAnswer);
                
                optionDiv.innerHTML = `
                    <div class="quiz-image">${option.emoji}</div>
                    <div>${option.vietnamese}</div>
                `;
                
                optionsContainer.appendChild(optionDiv);
            });
            
            // ·∫®n feedback v√† n√∫t ti·∫øp theo
            document.getElementById('quiz-feedback').classList.add('hidden');
            document.getElementById('next-question').classList.add('hidden');
        }

        function selectQuizAnswer(selected, correct) {
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(option => {
                option.onclick = null; // V√¥ hi·ªáu h√≥a click
                const optionText = option.querySelector('div:last-child').textContent;
                
                if (optionText === selected.vietnamese) {
                    if (selected === correct) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                    }
                } else if (optionText === correct.vietnamese) {
                    option.classList.add('correct');
                }
            });
            
            // Hi·ªÉn th·ªã feedback
            const feedback = document.getElementById('quiz-feedback');
            feedback.classList.remove('hidden');
            
            if (selected === correct) {
                feedback.className = 'feedback correct';
                feedback.textContent = 'üéâ Ch√≠nh x√°c! Gi·ªèi l·∫Øm!';
                playWordAudio(correct.english);
                markAsViewed(currentTopic, vocabularyData[currentTopic].words.indexOf(correct));
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = `‚ùå Ch∆∞a ƒë√∫ng! ƒê√°p √°n l√† "${correct.vietnamese}"`;
            }
            
            // Hi·ªÉn th·ªã n√∫t ti·∫øp theo
            if (currentQuizQuestion < quizQuestions.length - 1) {
                document.getElementById('next-question').classList.remove('hidden');
            } else {
                const nextBtn = document.getElementById('next-question');
                nextBtn.textContent = 'üè† V·ªÅ trang ch·ªß';
                nextBtn.onclick = showTopics;
                nextBtn.classList.remove('hidden');
            }
        }

        function nextQuestion() {
            currentQuizQuestion++;
            if (currentQuizQuestion < quizQuestions.length) {
                renderQuizQuestion();
            }
        }

        // √Çm thanh
        function playWordAudio(word, event, lang = 'en') {
            if (event) event.stopPropagation();
            
            // S·ª≠ d·ª•ng Web Speech API ƒë·ªÉ ph√°t √¢m
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = lang === 'vi' ? 'vi-VN' : 'en-US';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        function playAudio(event) {
            event.stopPropagation();
            const word = document.getElementById('flashcard-english').textContent;
            playWordAudio(word);
        }

        // Theo d√µi ti·∫øn ƒë·ªô
        function markAsViewed(topicKey, wordIndex) {
            if (!viewedWords[topicKey]) {
                viewedWords[topicKey] = new Set();
            }
            viewedWords[topicKey].add(wordIndex);
            saveProgress();
            
            // C·∫≠p nh·∫≠t hi·ªÉn th·ªã ti·∫øn ƒë·ªô ·ªü trang ch·ªß n·∫øu ƒëang hi·ªÉn th·ªã
            if (document.getElementById('topics-page').classList.contains('hidden') === false) {
                renderTopics();
            }
        }

        function saveProgress() {
            const progressData = {};
            Object.keys(viewedWords).forEach(topic => {
                progressData[topic] = Array.from(viewedWords[topic]);
            });
            // L∆∞u v√†o localStorage
            localStorage.setItem('vocabularyProgress', JSON.stringify(progressData));
        }

        function loadProgress() {
            // T·∫£i d·ªØ li·ªáu ti·∫øn ƒë·ªô t·ª´ localStorage
            const progressData = JSON.parse(localStorage.getItem('vocabularyProgress'));
            if (progressData) {
                viewedWords = {};
                Object.keys(progressData).forEach(topic => {
                    viewedWords[topic] = new Set(progressData[topic]);
                });
            } else {
                // Kh·ªüi t·∫°o d·ªØ li·ªáu ti·∫øn ƒë·ªô tr·ªëng
                viewedWords = {};
            }
        }

        // Kh·ªüi t·∫°o ·ª©ng d·ª•ng
        init();
    </script>
</body>
</html>
